{% extends "base.html" %}
{% block contenido %}

<div class="card-custom p-4">

    <!-- Men칰 de navegaci칩n (sin "Configuraci칩n") -->
    <nav class="navbar-nav-horizontal mb-4">
        <a href="{% url 'pedidos_home' %}" class="nav-item {% if request.resolver_match.url_name == 'pedidos_home' %}active{% endif %}">Inicio</a>
        <a href="{% url 'posibles_clientes' %}" class="nav-item {% if request.resolver_match.url_name == 'posibles_clientes' %}active{% endif %}">Posibles clientes</a>
        <a href="{% url 'gastos' %}" class="nav-item {% if request.resolver_match.url_name == 'gastos' %}active{% endif %}">Gastos</a>
        <a href="{% url 'resumen' %}" class="nav-item {% if request.resolver_match.url_name == 'resumen' %}active{% endif %}">Resumen</a>
    </nav>

    <h2 class="mb-4">Configuraci칩n</h2>

    <!-- Backup -->
    <div class="mb-5">
        <h5 class="section-title mb-3">Copia de seguridad</h5>
        <p class="mb-3">Descarga todos tus pedidos en un archivo JSON.</p>
        <form method="post">
            {% csrf_token %}
            <input type="hidden" name="accion" value="backup">
            <button type="submit" class="btn btn-primary">游닌 Descargar backup</button>
        </form>
    </div>

    <!-- Restaurar -->
    <div class="mb-5">
        <h5 class="section-title mb-3">Restaurar desde backup</h5>
        <p class="mb-3">Sube un archivo JSON de backup para reemplazar todos tus pedidos actuales.</p>
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <input type="hidden" name="accion" value="restore_preview">
            <div class="d-flex gap-2 align-items-end">
                <div style="flex:1;">
                    <input type="file" name="backup_file" accept=".json" class="form-control" required>
                </div>
                <button type="submit" class="btn btn-outline-warning">游댌 Vista previa</button>
            </div>
        </form>
    </div>

    <!-- Mensajes -->
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }} mt-3">{{ message }}</div>
        {% endfor %}
    {% endif %}

</div>

<style>
.section-title {
    color: var(--text-color);
}
</style>

{% endblock %}